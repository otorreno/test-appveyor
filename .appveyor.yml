image:
    - Visual Studio 2017
environment:
    BOOST_ROOT: C:\Libraries\boost_1_67_0
    AF_ROOT: C:\Program Files\ArrayFire\v3
    matrix:
        - GENERATOR: "Visual Studio 15 Win64"
platform:
    - x64
cache:
    - c:\tools\vcpkg\installed\

clone_folder: C:\test-appveyor

before_build:
    - vcpkg install --triplet x64-windows gtest eigen3
    - appveyor DownloadFile "https://drive.google.com/uc?authuser=0&id=1WGV7kAs5kSgUei2qeCfwFjTmzm1l63FX&export=download" -FileName ArrayFire-d920eae2.exe
    - ArrayFire-d920eae2.exe /S
    - dir "%AF_ROOT%"
build_script:
    - mkdir build && cd build
    - cmake .. -DCMAKE_TOOLCHAIN_FILE=c:/tools/vcpkg/scripts/buildsystems/vcpkg.cmake -G"%GENERATOR%"
    - cmake --build . --config Release
test_script:
    - ctest -C Release -V --output-on-failure